@inherits umbraco.MacroEngines.DynamicNodeContext
@{
    //Change mime type
    umbraco.library.ChangeContentType("text/xml");

    //Get the domain 
    var siteURL = "http://" + Request.Url.Host;
	var homenode = Model.AncestorOrSelf("Homepage");
	var siteName = String.IsNullOrEmpty(@homenode.siteName) ? "My" : @homenode.siteName;
    
    //Get Macro Parameters
    var rssTitle        = String.IsNullOrEmpty(@homenode.rssTitle) ? @siteName + " RSS feed" : @homenode.rssTitle;
    var rssDescription  = String.IsNullOrEmpty(@homenode.rssDescription) ? "Subscribe to my RSS feed" : @homenode.rssDescription;
    var startNodeID     = @homenode.rssStartNode;
	
    dynamic startNode;
    dynamic latestNodeUpdated;
	
    //Check we have a node ID passed in
    if (!String.IsNullOrEmpty(startNodeID))
    {
        //Get the node to list the child items in the RSS
        startNode = Library.NodeById(startNodeID);

        //Get the latest createDate of all news items to use as the RSS feed updateDate
        latestNodeUpdated = startNode.Children.Where("visible").OrderBy("updateDate desc").First();
    }
    else
    {
        //Stop the rest of the page rendering, as we don't have a start node ID to work with
        return;
    }
}        
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" 
    xmlns:content="http://purl.org/rss/1.0/modules/content/" 
    xmlns:wfw="http://wellformedweb.org/CommentAPI/" 
    xmlns:dc="http://purl.org/dc/elements/1.1/" 
    xmlns:rssdatehelper="urn:rssdatehelper">
        <channel>
            <title>@rssTitle</title>
            <link>@siteURL</link>
            <pubDate>@latestNodeUpdated.UpdateDate.ToString("r")</pubDate>
            <generator>umbraco</generator>
            <description>@rssDescription</description>
            <language>en</language>
            @{
                foreach (var item in startNode.Children.Where("Visible"))
                {
                    <item>
                        <title>@item.Name</title>
                        <link>@item.Url</link>
                        <pubDate>@item.UpdateDate.ToString("r")</pubDate>
                        <guid>@item.Url</guid>
                        <content:encoded><![CDATA[ @(item.HasValue("bodyText") ? item.bodyText : "") ]]></content:encoded>
                    </item>
                }
            }
        </channel>
</rss>